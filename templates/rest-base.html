{% extends 'base.html' %}
{% block title %}rest-base{% endblock title %}

{% block head_extra %}
{% load static %}
<script
    src="https://maps.googleapis.com/maps/api/js?key={{MAPS_API_KEY}}&v=3.exp&sensor=false&libraries=places"></script>
<script src="{% static "js/find_place.js" %}" type="text/javascript"></script>
{% endblock head_extra %}

{% block content %}

<div class="centered">
    {% if 'add' in request.path %}
    <h1>Add a Restaraunt</h1>
    {%else%}
    <h1>Edit a Restaraunt</h1>
    {%endif%}
    <form action="{{submit_path}}" method="post">
        <label>Search:
            {% if 'add' in request.path %}
            <input id="searchTextField" type="text" size="50">
            {%else%}
            <input id="searchTextField" type="text" size="50" value="{{address}}">
            {%endif%}
        </label>
        {% csrf_token %}
        {{form.as_p}}

       
        <div>
            {% if categories %}
            <input type="radio" class="category_radio" name="category_radio"/>
            <label for="new">Create New Category</label>
            <input type="text" id="category_text" name="category_text" disabled/>
            {%else%}
            <input type="radio" class="category_radio" name="category_radio" checked required/>
            <label for="new">Create New Category</label>
            <input type="text" id="category_text" name="category_text"/>
            {%endif%}
            
            
        </div>
        {% if categories %}
        <div>
            <input type="radio" class="category_radio" id="category_dropdown_radio" name="category_radio" checked/>
            <label for="dropdown">Choose an Existing Category</label>
            <select id="category_dropdown" name="category_dropdown" value="nice">
                {% for category in categories %}
                {% if 'edit' in request.path and current_category == category %}                
                <option value="{{category}}" selected>{{category}}</option>
                {%else%}
                <option value="{{category}}">{{category}}</option>
                {%endif%}

                {%endfor%}
              </select>
        </div>
        {%endif%}
        <script src="{% static "js/category_dropdown.js" %}" type="text/javascript"></script>
        <input type="hidden" id="address" name="address" />
        <input type="hidden" id="rest" name="rest" />
        <input type="hidden" id="rating" name="rating" />
        <input type="hidden" id="latitude" name="latitude" />
        <input type="hidden" id="longitude" name="longitude" />
        <button class="button submit-rest-button" type="submit">Save Rest</button>
    </form>
</div>
{% endblock content %}